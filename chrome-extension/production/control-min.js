$(function(){var e=!1,o=e?"https://localhost:8000":"https://handsfreechrome.com",t=e?o+"/html/input.html":o+"/input",n=!1,i=!1,a=!1,s=!1,r=1,c=!1,d=!1,l=$("html, body"),u=800,m=null,p=null,h=null,b=(new Date).getTime(),f=null,g=!1,k=document.getElementsByTagName("video")[0],w=function(){k=k||document.getElementsByTagName("video")[0]};$("body").css({"-webkit-transition":"0.6s ease-in-out"});var y={};chrome.storage.sync.get({commandAliases:{}},function(e){y=e.commandAliases}),window.onkeydown=function(e){return e.ctrlKey===!0&&32===e.keyCode?(chrome.runtime.sendMessage({greeting:"TOGGLE_EXTENSION_ON_OFF"}),!(32===e.keyCode)):void 0},$("body").append('<div id="hfc-help" style="display:none;"><h2>Hands Free Chrome Command Guide</h2><p>Say <kbd>help</kbd> to bring up a copy of this command guide.</p> <p style="font-style: italic">Note: the most common problem is a command being misheard by the speech engine. By observing the Hands Free input window, you can see what it thinks you said. This may help you learn the proper enunciations necessary in order to be understood more readily.</p> <p style="font-style: italic">Also note that the wording for many commands was chosen based on what the speech recognition engine recognized most consistently and accurately. Many common mishearings have been hardcoded to be recognized, so for instance when you say "pause" and it hears "paws," it will still work.</p> <h3>Scrolling</h3> <p>To scroll up a small amount, say <kbd>up</kbd>.<br> To scroll down a small amount, say <kbd>down</kbd>.<br> To scroll a small amount to the right, say <kbd>right</kbd>.<br> To scroll a small amount to the left, say <kbd>left</kbd>.</p> <p>To page up, say <kbd>rise</kbd>.<br> To page down, say <kbd>fall</kbd>.</p> <p>To scroll to the bottom of the page, say <kbd>bottom</kbd>.<br> To scroll to the top of the page, say <kbd>top</kbd>.</p> <p>To set the page scrolling continuously up, say <kbd>keep scrolling up</kbd>.<br> To set the page scrolling continuously down, say <kbd>keep scrolling down</kbd>.<br> To stop the page from continously scrolling, say <kbd>stop</kbd>.<br> To control the speed of scrolling, say <kbd>faster</kbd> or <kbd>slower</kbd>. The changes will be small, but you can issue these commands repeatedly for incremental gains.</p> <h3>Clicking</h3> <p>To see numbered tags alongside clickable elements on the page, say <kbd>map</kbd>. If <kbd>map</kbd> does not place a numbered tag next to the element you wish to click, try <kbd>guide</kbd> or <kbd>show</kbd> instead. These commands do the same thing, but they select different items for numbering. Using one after another will hide the previous command\'s tags before creating new ones.</p> <p>The tags will appear near the upper left corner of the corresponding item. Although the exact spacing can be unpredictable, a given number tag will always be to the immediate left of the element it corresponds to.</p> <p>To click a numbered element, simply speak the number.</p> <p>If you decide not to click anything, saying <kbd>map</kbd>/<kbd>guide</kbd>/<kbd>show</kbd> a second time will hide the number tags, as will using any of the scrolling commands.</p> <p><i>Note: There is currently no support for dropdown menus.</i></p> <h3>Dictation Mode</h3> <p>If you’ve clicked a text input, Hands Free will switch into dictation mode, and anything you say will be written as text into the selected text input.</p> <p>To turn off dictation mode and return to the normal control functionality, say <kbd>stop</kbd>.<br> To submit the textbox you’re typing in (the equivalent of pressing ‘enter’), say <kbd>go</kbd>. This is what you want when you finish typing in a searchbox, for example.<br> To move the cursor to the next input in the form (for example, from username to password), say <kbd>next</kbd>.<br> <br> To remove the last word you entered from the textbox, say <kbd>backspace</kbd>.</p> <h3>Navigation</h3> <p>To go to ANY website, say the name of the website on its own with the domain specified. There is no need to say “www.”<br> Examples: <kbd>google.com</kbd>, <kbd>en.wikipedia.org</kbd> (pronounced E-N-dot-wikipedia-dot-org), <kbd>mit.edu</kbd> (pronounced M-I-T-dot-E-D-U), <kbd>fr.wikipedia.org</kbd> (pronounced F-R-dot-wikipedia-dot-org)</p> <p>To go to a particular .com website, say <kbd>go to [website name]</kbd>. You can include the .com or omit it.<br> Examples: <kbd>go to google</kbd>, <kbd>go to google.com</kbd>, <kbd>go to amazon</kbd>, <kbd>go to facebook</kbd></p> <p style="font-style: italic">Note: there are some websites with longer names which will register erroneously with the engine. For example, there is no way to reach freecreditreport.com, which will be heard as “free credit report.com”, and will consequently send you to report.com.</p> <p>To go back one page in your history, say <kbd>back</kbd>.<br> To go forward one page in your history, say <kbd>forward</kbd>.</p> <p>To go to google.com, say <kbd>home</kbd>. This will also automatically put the extension into dictation mode, and is the fastest way to search for things.</p> <p style="font-style: italic">Note: Google can be used to indirectly reach almost any website that you can\'t navigate to directly via Hands Free. For instance, going to Google and searching for "free credit report.com" will correctly bring up as a result the actual "freecreditreport.com", which you can then click on.</p> <h3>Controlling Tabs</h3> <p>To open a new tab, say <kbd>new tab</kbd>.</p> <p style="font-style: italic">Note: There is another Chrome extension which will automatically direct new tabs to a page of your choosing. That extension can be found on <a href="https://chrome.google.com/webstore/detail/new-tab-redirect/icpgjfneehieebagbmdbhnlpiopdcmna?hl=en">the Chrome Web Store.</a></p> <p>To close the current tab, say <kbd>close tab</kbd>.<br> To switch the active tab to the next tab in the window, say <kbd>switch</kbd>.</p> <p>To toggle mute on the current tab (muting/unmuting the entire tab), say <kbd>silence</kbd>.</p> <h3>Controlling the Window</h3> <p>To enter or exit full screen mode, say <kbd>full screen</kbd>. All commands work just the same in full screen mode.<br> To minimize, say <kbd>minimize</kbd>.<br> To maximize, say <kbd>maximize</kbd>.</p> <p>To close all Chrome windows entirely, say <kbd>exit</kbd> or <kbd>quit</kbd>.</p> <h3>Zooming</h3> <p>To zoom in, say <kbd>zoom in</kbd><br> To zoom out, say <kbd>zoom out</kbd>.<br> To restore the zoom level to normal, say <kbd>zoom normal</kbd>.</p> <h3>Refreshing</h3> <p>To reload the page, say <kbd>reload</kbd> or <kbd>refresh</kbd>.</p> <h3>YouTube</h3> <p>These commands are only applicable if you are viewing a video on youtube.com. They may work on videos playing on other websites, but success is not guaranteed.</p> <p>To pause the video, say <kbd>pause</kbd>.<br> To unpause the video, say <kbd>play</kbd>.</p> <p>To seek forward 15 seconds in the video, say <kbd>skip</kbd>.<br> To seek forward 60 seconds in the video, say <kbd>jump</kbd>.<br> To seek forward 5 minutes in the video, say <kbd>leap</kbd>.<br> To seek backward 30 seconds in the video, say <kbd>rewind</kbd>.</p> <p>To increase the video\'s volume by 20% or to max (whichever comes first), say <kbd>increase volume</kbd>.<br> To decrease the video\'s volume by 20% or to minimum (whichever comes first), say <kbd>decrease volume</kbd>.</p> <p>To mute the video, say <kbd>mute</kbd>.<br> To unmute the video, say <kbd>unmute</kbd>.</p> <p>To restart the video, say <kbd>restart</kbd>.</p> <h3>Closing Hands Free</h3> <p>Lastly, to turn off Hands Free, say <kbd>done</kbd>.</p></div>'),$("#hfc-help").css({background:"#EDE5A4","overflow-y":"scroll",padding:"10px 25px","border-style":"solid","border-width":"3px","border-color":"black","z-index":"9999",position:"fixed",top:"30px",left:"5%",width:"88%",height:"88%",margin:"6% 10"}),$("#hfc-help h2").css({"font-family":"arial, sans-serif","font-size":"20px",height:"25px",color:"black"}),$("#hfc-help h3").css({"font-family":"arial, sans-serif","font-size":"15px",height:"18px",color:"black"}),$("#hfc-help p").css({"font-size":"17px","text-align":"left","margin-top":"17px","margin-bottom":"17px",color:"black"}),$("#hfc-help kbd").css({padding:"0.03em 0.3em",border:"1px solid #ccc","font-size":"14px","font-family":"Arial,Helvetica,sans-serif","font-weight":"bold","background-color":"#f7f7f7",color:"#333","-webkit-box-shadow":"0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset","border-radius":"3px",display:"inline-block",margin:"0 0.1em","text-shadow":"0 1px 0 #fff","line-height":"1.4","white-space":"nowrap"});var T=function(){$("span.numTag").css({background:"white",border:"1px solid black",color:"black","font-size":"10pt",position:"absolute","z-index":"999"})},v=function(e){var o=$(window),t=$(e),n=o.scrollTop(),i=n+o.height(),a=t.offset().top,s=a+t.height();return!(n>s||a>i||s>i||n>a)},x=function(){$(".numTag").remove(),n=!1,i=!1,s||($(".numTag").remove(),a=!1)},E=function(e,o){"up"===e&&(operator="-="),"down"===e&&(operator="+="),m=e,p=o,l.stop(),l.animate({scrollTop:operator+document.body.scrollHeight},{duration:o*document.body.scrollHeight/50,easing:"linear",complete:function(){p=null}})},I=function(){c=!0,chrome.runtime.sendMessage({greeting:{dictModeOn:!0}})},z=function(e){e?document.getElementById("dictationEnable").click():document.getElementById("dictationDisable").click()};window.onbeforeunload=function(){chrome.runtime.sendMessage(window.location.href!==t?{greeting:{dictModeOn:!1,origin:"mainWindow"}}:{greeting:{dictModeOn:!1,origin:"inputWindow"}})};var N=new function(){var e=function(){if(n)return void x();x();var e=1;return $("a, button, input, img, textarea").each(function(){if(v(this)&&VISIBILITY.isVisible(this)){var o=e,t=$(this).offset();$("body").append('<span class="numTag" id="'+o+'">'+o+"</span>"),$("#"+o).css({left:t.left-25,top:t.top}),T();var n=this;switch(this.tagName){case"A":case"IMG":$("#"+o).click(function(){setTimeout(function(){n.click()},10)});break;case"BUTTON":$("#"+o).click(function(){n.click()});break;case"INPUT":if(["checkbox","radio","submit"].includes(n.type)){$("#"+o).click(function(){n.click()});break}["text","password","number"].includes(n.type)&&$("#"+o).click(function(){n.focus(),I()});break;case"TEXTAREA":$("#"+o).click(function(){n.focus(),I()})}e++}}),void(n=!0)},o=function(){if(i)return void x();x();var e=1;return $("span, li").each(function(){if(v(this)&&VISIBILITY.isVisible(this)){var o=e,t=$(this).offset();$("body").append('<span class="numTag" id="'+o+'">'+o+"</span>"),$("#"+o).css({left:t.left-25,top:t.top}),T();var n=this;$("#"+o).click(function(){setTimeout(function(){n.click()},10)}),e++}}),void(i=!0)},c=function(){if(a)return void x();x();var e=1;return $("a, button, input, img, textarea").each(function(){if(v(this)){var o=e,t=$(this).offset();$("body").append('<span class="numTag" id="'+o+'">'+o+"</span>"),$("#"+o).css({left:t.left-25,top:t.top}),T();var n=this;switch(this.tagName){case"A":case"IMG":case"SPAN":$("#"+o).click(function(){setTimeout(function(){n.click()},10)});break;case"BUTTON":$("#"+o).click(function(){n.click()});break;case"INPUT":if(["checkbox","radio","submit"].includes(n.type)){$("#"+o).click(function(){n.click()});break}["text","password","number"].includes(n.type)&&$("#"+o).click(function(){n.focus(),I()});break;case"TEXTAREA":$("#"+o).click(function(){n.focus(),I()})}e++}}),void(a=!0)},h=function(){chrome.runtime.sendMessage({greeting:"KEEP_SHOWING"}),s=!0,c()},b=function(){chrome.runtime.sendMessage({greeting:"STOP_SHOWING"}),s=!1,x()},f=function(e){"undefined"!==e&&(e.endsWith(".com")||e.endsWith(".edu")||e.endsWith(".gov")||e.endsWith(".org")||(e.endsWith(".")&&(e=e.slice(0,-1)),e+=".com"),("readit.com"===e||"read.com"===e)&&(e="reddit.com"),window.location.href="http://www."+e)},g=function(){var e=!1;"www.google.com"===location.hostname&&(e=!0),window.location.href="https://www.google.com/###",e&&setDelay(function(){location.reload()},500)},z=function(){l.stop(),x();var e="+=200";l.animate({scrollTop:e},{duration:"slow",easing:"swing"})},N=function(){l.stop(),x();var e="-=200";l.animate({scrollTop:e},{duration:"slow",easing:"swing"})},O=function(){x();var e="+=200";$("html, body").animate({scrollLeft:e},{duration:"slow",easing:"swing"})},C=function(){x();var e="-=200";$("html, body").animate({scrollLeft:e},{duration:"slow",easing:"swing"})},A=function(){l.stop(),x();var e="+="+window.innerHeight;l.animate({scrollTop:e},{duration:"slow",easing:"swing"})},M=function(){l.stop(),x();var e="-="+window.innerHeight;l.animate({scrollTop:e},{duration:"slow",easing:"swing"})},H=function(){window.history.back()},S=function(){window.history.forward()},_=function(){l.stop(),x(),l.animate({scrollTop:$("html,body").offset().top},{duration:"fast",easing:"swing"})},D=function(){l.stop(),x(),l.animate({scrollTop:l[0].scrollHeight},{duration:"fast",easing:"swing"})},F=function(){location.reload()},W=function(){d&&$("body").css({"-webkit-filter":"blur(5px)"}),$("html, body").animate({zoom:r+.2},{duration:"slow",easing:"linear"}),r+=.2},B=function(){$("body").css({"-webkit-filter":"blur(0px)"}),$("html, body").animate({zoom:r-.2},{duration:"slow",easing:"swing"}),r-=.2},G=function(){$("body").css({"-webkit-filter":"blur(0px)"}),$("html, body").animate({zoom:1},{duration:"slow",easing:"swing"}),r=1},P=function(){d&&$("body").css({"-webkit-filter":"blur(0px)"})},R=function(){"none"===$("#hfc-help").css("display")?($("#hfc-help").fadeIn(125),l=$("#hfc-help")):(l.fadeOut(125),l.scrollTop(0),l=$("html, body"))},L=function(){"none"!==$("#hfc-help").css("display")&&($("#hfc-help").fadeOut(125),l=$("html, body"))},U=function(){p&&(p+=250),m&&E(m,p)},j=function(){p&&(p-=250),p>0||(p=5),m&&E(m,p)},q=function(){l.stop()},Y=function(){d=!d},V=function(){E("down",u)},X=function(){E("up",u)},K=function(){console.log("not implemented")},Z=function(){console.log("not implemented")},J=function(){w(),k.play()},Q=function(){w(),k.pause()},eo=function(){w(),k.currentTime=0},oo=function(){w(),k.volume>.8?k.volume=1:k.volume+=.2},to=function(){w(),k.volume<.2?k.volume=0:k.volume-=.2},no=function(){w(),k.muted=!0},io=function(){w(),k.muted=!1},ao=function(){w(),k.currentTime+15<k.duration?k.currentTime+=15:k.currentTime=k.duration},so=function(){w(),k.currentTime-15>0?k.currentTime-=15:k.currentTime=0},ro=function(){w(),k.currentTime+60<k.duration?k.currentTime+=60:k.currentTime=k.duration},co=function(){w(),k.currentTime+300<k.duration?k.currentTime+=300:k.currentTime=k.duration},lo={map:e,guide:o,show:c,"keep showing":h,"stop showing":b,"go to":f,home:g,down:z,town:z,up:N,op:N,app:N,right:O,left:C,fall:A,full:A,song:A,all:A,rise:M,rice:M,frys:M,back:H,forward:S,top:_,bottom:D,reload:F,refresh:F,zoom:W,resume:W,zoomin:W,"zoom in":W,"zoom out":B,"zoom normal":G,enhance:P,help:R,slower:U,flower:U,faster:j,stop:q,hidehelp:L,play:J,pause:Q,paws:Q,pawn:Q,mute:no,unmute:io,restart:eo,skip:ao,rewind:so,jump:ro,leap:co,"increase volume":oo,"decrease volume":to,"blade runner mode":Y,"keep scrolling down":V,"keep scrolling up":X,"keep scrolling right":K,"keep scrolling left":Z};this.callCommand=function(e){return e=y[e]||e,console.log("Page has received a command from Hands Free: "+e),window.location.origin!==t?e.split(" ")[0]+" "+e.split(" ")[1]=="go to"?void lo["go to"](e.split(" ")[2]):"function"==typeof lo[e]?void lo[e]():0:void 0}};chrome.runtime.onMessage.addListener(function(e){if(e!==h||(new Date).getTime()-b>=1e3){if(h=e,b=(new Date).getTime(),window.location.href===t)return console.log(e),void z(e.dictModeOn);if("CHROME_DICTATION_STOP"===e)return c=!1,void $(document.activeElement).blur();if("CHROME_DICTATION_SUBMIT"===e)return c=!1,void $(document.activeElement).parents("form:first").submit();if("CHROME_DICTATION_BACKSPACE"===e){var o=document.activeElement.value.split(" ");return void(document.activeElement.value=1===o.length?"":o.slice(0,o.length-1).join(" "))}if("CHROME_DICTATION_NEXT"===e){var s=$(document.activeElement).closest("form").find(":input");if(s.length<=1)return;for(var r=s.index(document.activeElement)+1,l=r,u=!1;!["password","text","number","search"].includes(s.eq(r).attr("type"));)if(r!==s.length){if(u&&r===l)return;r++}else r=0,u=!0;return void s.eq(r).focus()}if(c){if(!g&&(parseInt(e)||"att"===e||"home"===e)&&["",void 0].includes(document.activeElement.value))return void(g=!0);["",void 0].includes(document.activeElement.value)?(document.activeElement.value=""+e,g=!1):(document.activeElement.value+=" "+e,g=!1)}else{if(n||i||a||"4"!==e||(e="fall"),!d&&("zoom"===e||"resume"===e))return;if(0===N.callCommand(e)){"att"===e&&(e="8"),"sex"===e&&(e="6"),"for"===e&&(e="4"),"to"===e&&(e="2");var m={one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",ten:"10"};e=m[e]||e,clearTimeout(f),f=setTimeout(function(){$("#"+e).trigger("click"),x()},1e3)}}}}),"https://www.google.com/###"===document.location.href&&I(),chrome.runtime.sendMessage({greeting:"SHOW?"},function(e){e&&(s=!0,N.callCommand("show"))})});